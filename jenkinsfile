pipeline {
    agent any
    stages {
        
        stage("clone") {
            steps {
                script {
                    git branch: 'main',credentialsId: 'ssh', url: 'git@github.com:nidhal19615/CrudJenkins.git'
                }
            }
        }
      stage('Docker Push') {
    agent any
    steps {
        withCredentials([usernamePassword(credentialsId: 'dockerhub_id', passwordVariable: '213JMT6518', usernameVariable: 'nidhal2')]) {
            sh "docker login -u ${usernameVariable} -p ${passwordVariable}"
            sh 'docker push shanem/spring-petclinic:latest'
        }
    }
}

     
    }
    }